import streamlit as st
import pandas as pd

st.set_page_config(page_title="ì˜ì–‘ì†Œ ì¡°íšŒ & ìŒì‹ ì¶”ì²œ", page_icon="ğŸ")

st.title("ğŸ ìŒì‹ ì˜ì–‘ì†Œ ì¡°íšŒ & ì¶”ì²œ ì¡°í•©")

# -----------------------------
# âœ… ì‹¤ì œ ìŒì‹ ë°ì´í„° + ì œê³µëŸ‰(ê·¸ë¨)
# -----------------------------
data = {
    "ìŒì‹": ["ì‚¬ê³¼", "ë°”ë‚˜ë‚˜", "ë”¸ê¸°", "ìš°ìœ ", "ìš”ê±°íŠ¸", "ì¹˜ì¦ˆ", "ê³„ë€", "í”¼ì", "ë¼ë©´", "ë°¥"],
    "ì œê³µëŸ‰(g)": [100, 100, 100, 200, 150, 30, 50, 100, 120, 210],
    "ì¹¼ë¡œë¦¬": [52, 89, 33, 42, 59, 402, 155, 266, 450, 130],
    "ë‹¨ë°±ì§ˆ": [0.3, 1.1, 0.8, 3.4, 10, 25, 13, 11, 10, 2.7],
    "íƒ„ìˆ˜í™”ë¬¼": [14, 23, 8, 5, 3.6, 1.3, 1.1, 33, 70, 28],
    "ì§€ë°©": [0.2, 0.3, 0.3, 1, 0.4, 33, 11, 10, 16, 1]
}

df = pd.DataFrame(data)

# âœ… ì¶”ì²œ ìŒì‹ ë§¤í•‘
recommendations = {
    "ì‚¬ê³¼": ["ìš”ê±°íŠ¸", "ì¹˜ì¦ˆ"],
    "ë°”ë‚˜ë‚˜": ["ìš°ìœ ", "ìš”ê±°íŠ¸"],
    "ë”¸ê¸°": ["ì‚¬ê³¼", "ìš”ê±°íŠ¸"],
    "ìš°ìœ ": ["ì‹œë¦¬ì–¼", "ë°”ë‚˜ë‚˜"],
    "ìš”ê±°íŠ¸": ["ë”¸ê¸°", "ì‚¬ê³¼"],
    "ì¹˜ì¦ˆ": ["ê³„ë€", "ë°¥"],
    "ê³„ë€": ["ë°¥", "ì¹˜ì¦ˆ"],
    "í”¼ì": ["ì½œë¼", "ì‚¬ì´ë‹¤"],
    "ë¼ë©´": ["ê¹€ì¹˜", "ê³„ë€"],
    "ë°¥": ["ê³„ë€", "ê¹€ì¹˜"]
}

# âœ… ì˜ì–‘ì†Œ ì„ íƒ
nutrient_option = st.selectbox(
    "ğŸ“Š ë³´ê³  ì‹¶ì€ ì˜ì–‘ì†Œë¥¼ ì„ íƒí•˜ì„¸ìš”:",
    ["ì¹¼ë¡œë¦¬", "ë‹¨ë°±ì§ˆ", "íƒ„ìˆ˜í™”ë¬¼", "ì§€ë°©"]
)

# âœ… ìŒì‹ ì„ íƒ
food_option = st.multiselect(
    "ğŸ½ï¸ ì˜ì–‘ì†Œë¥¼ ë³´ê³  ì‹¶ì€ ìŒì‹ì„ ì„ íƒí•˜ì„¸ìš”:",
    df["ìŒì‹"].tolist(),
    default=[]
)

# -----------------------------
# âœ… ê²°ê³¼ ì¶œë ¥
# -----------------------------
if not food_option:
    st.info("ğŸ‘† ìœ„ì—ì„œ ìŒì‹ì„ ì„ íƒí•˜ë©´ ì˜ì–‘ì†Œ ì •ë³´ê°€ í‘œì‹œë©ë‹ˆë‹¤.")
else:
    filtered = df[df["ìŒì‹"].isin(food_option)][["ìŒì‹", "ì œê³µëŸ‰(g)", nutrient_option]]
    filtered = filtered.sort_values(by=nutrient_option, ascending=False)

    st.subheader(f"âœ… ì„ íƒí•œ ìŒì‹ì˜ '{nutrient_option}' + ì œê³µëŸ‰ ì •ë³´")
    st.table(filtered.set_index("ìŒì‹"))

    # âœ… ìŒì‹ ì¶”ì²œ ì˜ì—­
    st.subheader("ğŸ½ï¸ ì¶”ì²œ ìŒì‹ ì¡°í•©")

    for food in food_option:
        recommended = recommendations.get(food, [])
        if recommended:
            st.write(f"ğŸŒŸ **{food}** ì™€(ê³¼) ì˜ ì–´ìš¸ë¦¬ëŠ” ìŒì‹:")
            st.success(", ".join(recommended))
        else:
            st.write(f"â“ **{food}** ëŠ” ì¶”ì²œ ë§¤ì¹­ ì •ë³´ê°€ ì—†ì–´ìš”.")
