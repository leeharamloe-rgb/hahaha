import streamlit as st
import pandas as pd

st.set_page_config(page_title="ì˜ì–‘ì†Œ ê²€ìƒ‰ & ìŒì‹ ì¡°í•© ì¶”ì²œ", page_icon="ğŸ½ï¸")

st.title("ğŸ½ï¸ ìŒì‹ ì˜ì–‘ì†Œ ê²€ìƒ‰ & ì¡°í•© ì¶”ì²œ")

# -----------------------------
# âœ… ìƒ˜í”Œ ë°ì´í„° (ì»¬ëŸ¼ëª… í™•ì‹¤íˆ ì¡´ì¬)
# -----------------------------
data = {
    "ìŒì‹": ["ë‹­ê°€ìŠ´ì‚´", "ê³ êµ¬ë§ˆ", "ë¸Œë¡œì½œë¦¬", "ë‘ë¶€", "ê³„ë€", "í˜„ë¯¸ë°¥"],
    "ì¹¼ë¡œë¦¬": [165, 86, 55, 76, 155, 130],
    "ë‹¨ë°±ì§ˆ": [31, 1.6, 3.7, 8, 13, 2.7],
    "íƒ„ìˆ˜í™”ë¬¼": [0, 20, 11, 2, 1.1, 28],
    "ì§€ë°©": [3.6, 0.1, 0.6, 4.8, 11, 1]
}

df = pd.DataFrame(data)

# âœ… ì˜ì–‘ì†Œ ì»¬ëŸ¼ ì •ì˜ (ë°ì´í„°ì™€ 100% ì¼ì¹˜)
nutrient_cols = ["ì¹¼ë¡œë¦¬", "ë‹¨ë°±ì§ˆ", "íƒ„ìˆ˜í™”ë¬¼", "ì§€ë°©"]

# âœ… ìŒì‹ ì¡°í•© ì¶”ì²œ í…Œì´ë¸”
pairing_recommend = {
    "ë‹­ê°€ìŠ´ì‚´": ["ê³ êµ¬ë§ˆ", "ë¸Œë¡œì½œë¦¬"],
    "ê³ êµ¬ë§ˆ": ["ë‹­ê°€ìŠ´ì‚´", "ê³„ë€"],
    "ë¸Œë¡œì½œë¦¬": ["ë‘ë¶€", "ë‹­ê°€ìŠ´ì‚´"],
    "ë‘ë¶€": ["í˜„ë¯¸ë°¥", "ë¸Œë¡œì½œë¦¬"],
    "ê³„ë€": ["ê³ êµ¬ë§ˆ", "í˜„ë¯¸ë°¥"],
    "í˜„ë¯¸ë°¥": ["ë‘ë¶€", "ê³„ë€"]
}

# -----------------------------
# âœ… ê²€ìƒ‰ ì…ë ¥
# -----------------------------
query = st.text_input("ğŸ” ìŒì‹ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”:", "")

if query:
    result = df[df["ìŒì‹"].str.contains(query, case=False)]

    if result.empty:
        st.warning("âš ï¸ í•´ë‹¹ ìŒì‹ì´ ë°ì´í„°ì— ì—†ìŠµë‹ˆë‹¤. ë‹¤ë¥¸ ì´ë¦„ìœ¼ë¡œ ê²€ìƒ‰í•´ë³´ì„¸ìš”.")
    else:
        food = result.iloc[0]

        st.subheader(f"âœ… '{food['ìŒì‹']}' ì˜ì–‘ì†Œ ì •ë³´")
        st.table(food[nutrient_cols].to_frame(name="ì˜ì–‘ì†Œ ê°’"))

        # âœ… ì¡°í•© ì¶”ì²œ
        st.subheader("ğŸ± í•¨ê»˜ ë¨¹ìœ¼ë©´ ì¢‹ì€ ìŒì‹ ì¶”ì²œ")
        recommendations = pairing_recommend.get(food["ìŒì‹"], [])

        if recommendations:
            st.success("âœ¨ ì¶”ì²œ ì¡°í•©:")
            for r in recommendations:
                st.write(f"âœ… **{r}**")
        else:
            st.info("âš ï¸ ë“±ë¡ëœ ì¶”ì²œ ì¡°í•©ì´ ì—†ìŠµë‹ˆë‹¤.")

else:
    st.info("ğŸ‘† ìœ„ ê²€ìƒ‰ì°½ì— ìŒì‹ ì´ë¦„ì„ ì…ë ¥í•˜ë©´ ì˜ì–‘ì†Œì™€ ì¶”ì²œ ì¡°í•©ì´ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.")
